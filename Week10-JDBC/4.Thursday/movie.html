<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Movie Search Demo - OMDb API</title>
    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
    <style>
        body {
            background-color: #f8f9fa;
        }
        .search-wrapper {
            min-height: 40vh;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <!-- Title and search bar -->
        <div class="row justify-content-center search-wrapper">
            <div class="col-12 col-md-8 col-lg-6 text-center">
                <h1 class="mb-4">OMDb Movie Search</h1>
                <p class="text-muted mb-4">
                    Type a movie title and search. This page uses JavaScript to call the OMDb API and display the results.
                </p>
                <form id="search-form" class="d-flex gap-2 justify-content-center">
                    <input
                        type="text"
                        id="search-input"
                        class="form-control"
                        placeholder="Enter a movie title, for example: Batman"
                        required
                    >
                    <button type="submit" class="btn btn-primary">
                        Search
                    </button>
                </form>
                <div id="status" class="mt-3 text-muted"></div>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="mt-4"></div>
    </div>

    <!-- Bootstrap JS (optional, only for helpers like grid fallback) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const apiKey = "16efb775"; // <-- Put your OMDb API key here
        const form = document.getElementById("search-form");
        const input = document.getElementById("search-input");
        const resultsDiv = document.getElementById("results");
        const statusDiv = document.getElementById("status");

        form.addEventListener("submit", function (event) {
            event.preventDefault();
            const query = input.value.trim();
            if (!query) {
                return;
            }
            searchMovies(query);
        });

        async function searchMovies(query) {
            // Clear previous status and results
            statusDiv.textContent = "Searching...";
            resultsDiv.innerHTML = "";

            try {
                const url = `https://www.omdbapi.com/?apikey=${apiKey}&s=${encodeURIComponent(query)}`;
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }

                const data = await response.json();

                if (data.Response === "False") {
                    statusDiv.textContent = data.Error || "No results found.";
                    return;
                }

                statusDiv.textContent = `Found ${data.Search.length} result(s) for "${query}".`;

                // Build Bootstrap card grid
                const row = document.createElement("div");
                row.className = "row g-3";

                data.Search.forEach(movie => {
                    const col = document.createElement("div");
                    col.className = "col-12 col-sm-6 col-md-4 col-lg-3";

                    const card = document.createElement("div");
                    card.className = "card h-100";

                    const posterUrl = movie.Poster && movie.Poster !== "N/A"
                        ? movie.Poster
                        : "https://via.placeholder.com/300x445?text=No+Image";

                    const img = document.createElement("img");
                    img.src = posterUrl;
                    img.className = "card-img-top";
                    img.alt = movie.Title;

                    const cardBody = document.createElement("div");
                    cardBody.className = "card-body";

                    const title = document.createElement("h5");
                    title.className = "card-title";
                    title.textContent = movie.Title;

                    const text = document.createElement("p");
                    text.className = "card-text mb-1";
                    text.textContent = `Year: ${movie.Year}`;

                    const type = document.createElement("p");
                    type.className = "card-text";
                    type.textContent = `Type: ${movie.Type}`;

                    cardBody.appendChild(title);
                    cardBody.appendChild(text);
                    cardBody.appendChild(type);

                    card.appendChild(img);
                    card.appendChild(cardBody);
                    col.appendChild(card);
                    row.appendChild(col);
                });

                resultsDiv.appendChild(row);

            } catch (error) {
                console.error(error);
                statusDiv.textContent = "Something went wrong while contacting the API.";
            }
        }
    </script>
</body>
</html>
